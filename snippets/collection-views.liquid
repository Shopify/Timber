{% comment %}
  Toggle between collection.liquid and collection.list.liquid with the
  ?view= parameter.
{% endcomment %}

<div class="collection-view">
  <a title="Grid view" class="change-view{% unless template contains 'list' %} collection-view--active{% endunless %}" data-view="grid">
    {{ 'collection-view-grid.svg' | asset_url | img_tag | alt="Grid View" }}
  </a>
  <a title="List view" class="change-view{% if template contains 'list' %} collection-view--active{% endif %}" data-view="list">
    {{ 'collection-view-list.svg' | asset_url | img_tag | alt="List View" }}
  </a>
</div>

<script>
  $(function() {
    $('.change-view').on('click', function() {
      var view = $(this).data('view'),
          url = document.URL,
          hasParams = url.indexOf('?') > -1;

      if (hasParams) {
        window.location = url + '&view=' + view;
      } else {
        window.location = url + '?view=' + view;
      }
    });
  });
</script>